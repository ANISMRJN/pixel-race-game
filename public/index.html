// --- UNIVERSAL INPUT (Works for Space, Click, and Touch) ---
    function handleAction(e) {
        // Only run if the login screen is gone
        if(document.getElementById('overlay').style.display === 'none') {
            socket.emit('move');
            playTapSound();
        }
    }

    // 1. Keyboard (Spacebar)
    window.addEventListener('keydown', (e) => { 
        if(e.code === 'Space') handleAction(e); 
    });

    // 2. The "Everything" Listener (Mouse + Touch)
    // We attach this to the WHOLE body so you can tap ANYWHERE on the screen
    window.addEventListener('pointerdown', (e) => {
        // Ignore clicks on the Join button/input so you can still type
        if (e.target.tagName !== 'BUTTON' && e.target.tagName !== 'INPUT') {
            handleAction(e);
        }
    });

    // Prevent annoying zoom-on-tap on mobile
    window.addEventListener('touchstart', (e) => {
        if (e.target.tagName !== 'INPUT') {
            e.preventDefault();
        }
    }, { passive: false });
